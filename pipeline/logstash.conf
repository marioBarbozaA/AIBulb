input {
  mongodb {
    uri => 'mongodb://Router_1:27017/disponibles'
    placeholder_db_dir => '/usr/share/logstash/data/'
    placeholder_db_name => 'logstash_sqlite.db'
    collection => 'servicios'
    batch_size => 5000
  }
}

filter {
  #json {
  #  source => "message"
  #}
  #
  #if "_jsonparsefailure" in [tags] {
  #  drop {}
  #}
  #
  #if [status] == "Exitoso" {
  #  mutate {
  #    remove_field => ["@version", "@timestamp", "log", "host", "file", "path", "Respuesta", "idConversacion","estado","serviciosEncontrados","logo","prompt"
  #    ,"geolocalizacion","event","ubicacionActual"]
  #    add_field => {
  #      "nombre" => "%{[serviciosEncontrados][0][nombre]}"
  #      "hora" => "%{hora}"
  #      "fecha" => "%{fecha}"
  #      "status" => "%{status}"
  #      "monto" => "%{monto}"
  #      "tipoRequest" => "%{tipoRequest}"
  #      "pais" => "%{[ubicacionActual][pais]}"
  #    }
  #  }
  #} else {
  #  drop {}
  #}
}

output {
  stdout {
    codec => rubydebug
  }
}